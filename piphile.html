<!DOCTYPE html public>
<!--
    π
    &nbsp
-->
<!--
    <video width="400" id=rickRoll loop>
        <source src="Rick Astley - Never Gonna Give You Up (Official Music Video).mp4" type="video/mp4">
    </video>
    <button type="button" onclick="playRickRoll();">lancer le meme</button><button type="button" onclick="stopRickRoll();">arrèter ce meme</button>
-->
<html>
    <head>
        <title>πphile</title>
        <link href="style.css" rel=stylesheet>
        <link href=icon.png rel=icon>
        <script>
            MathJax = {
              loader: {load: ['input/asciimath', 'output/chtml', 'ui/menu']},
            };
            </script>
            <script type="text/javascript" id="MathJax-script" async
              src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/startup.js">
        </script>
        <script src='bignumber.js'></script>
        <script src="values.js"></script>
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
    </head>
    <body>
        <div class=navbar>
            <img src=icon_rect.png>
            <ul id=menu>
                <li><a onclick="show_content('home');make_active(this);" class=active href=#>Accueil</a></li>
                <li><a onclick="show_content('intro');make_active(this);" href=#>Introduction</a></li>
                <li><a onclick="show_content('quadrature_du_cercle');make_active(this);" href=#>Quadrature du cercle</a></li>
                <li><a onclick="show_content('calculPi');make_active(this);" href=#>calcule pratique de &#960</a></li>
                <li><a onclick="show_content('settings');make_active(this);" href=#>paramètres</a></li>
            </ul>
        </div>
        <div class="content color">
            <div id=home class=background>
                <h1 class=title>Bienvenue sur &#960phile</h1><br>
                <div id="Jean-Paul_Delahaye">
                    <p>Ceci est un simple site internet dédié au nombre pi.</p><br>
                    <p>J'utiliserais tout au long de ce site le symbole "π" ou "pi" de manière indiférente.</p>
                    <p>Je dois remercier très chaleureusement Jean-Paul delahaye pour son livre : "Le fascinant nombre &#960" qui a été pour moi a la fois une ressource comme une inspiration pour ce projet. Beaucoup de démonstarations et d'illustrations proviennent de cette ouvrage.</p>
                </div>
                <div id=couverture>
                    <div class="overlay-image">
                        <div class="normal">
                            <img class="image" src="le fascinant nombre pi.png" alt='image couverture du livre "le fascinant nombre pi"' />
                            <div class="text" id=txt_couverture></div>
                        </div>
                        <div class="hover">
                            <img class="image" src="1200px-Jean-Paul_Delahaye_2008_2.jpg" alt="image de Monsieur Jean-Paul Delahaye" />
                            <div class="text">M. Jean-Paul Delahaye</div>
                        </div>
                    </div>
                </div>
                <img id=couverture src="le fascinant nombre pi.png" alt="couverture du livre "Le fascinant nombre &#960" height="300">
            </div>
            <div id=intro class=background>
                <h1 class=title>Introduction: Qu'est ce que pi</h1>
                <div id=Pcerclepi>
                    <h3>Définition :</h3>
                    <p>La définition la plus simple de &#960 est la suivante :</p>
                    <p>π est le rapport entre le périmetre, `cc "P"`, et le diametre, `D = 2r` :</p>
                    <p>`π = cc "P"/D = cc "P"/(2r)`</p>
                    <p>La longueur d'un cercle de diametre 1 est donc égale à π :</p>
                </div>
                <div id=Pi-unrolled>
                    <img src="Pi-unrolled.gif" alt="cercle de diametre 1 qui se fait dérouler, le périmetre vaut pi" id=imgPiunrolled><br>
                    <p class=source>source :&nbsp</p><a href=https://fr.wikipedia.org/wiki/Pi class=source>wikipedia.org/wiki/Pi</a>
                </div>
                <h3>Constance de pi :</h3>
                <p>&#960 est une constante, il ne dépend pas du cercle que l'on choisi.</p>
                <div>
                    <span>Plaçons nous dans un plan qui respecte</span>
                    <button onclick="theoremeThales()" type="button" id=buttonThales>théorème de Thalès</button>
                    <span>, un plan euclidien</span>
                </div>
                <div id=explicationtheoremethales>
                    <p>si `A`, `B` et `C` alignés et `A`, `D` et `E` aussi et que `(BD)` // `(CE)` (voir schéma) alors :</p>
                    <p>`(AD)/(AE) = (AB)/(AC) = (BD)/(CE)`</p>
                    <img src="theorême de thalès.png" alt="dessin du théorème de Thalès" width="350" id="theoremeThales">
                </div>
                <p>On pose : (voir schéma)</p>
                <p>`r_1` et `r_2` respectivement le rayon de `cc "C"_1` et `cc "C"_2`</p>
                <p>`l_1` et `l_2` respectivement la longueur des côtés des polygones régulier insrcits à `cc "C"_1` et `cc "C"_2` et `n` le nombre de côté de ces dit polygones et `cc "P"_(p1)` et `cc "P"_(p2)` le périmètre de ces dit polygones. `cc "P"_(p1) = n xx l_1` et `cc "P"_(p2) = n xx l_2`</p>
                <p>`cc "P"_1` et `cc "P"_2` respectivement le périmètre de `cc "C"_1` et `cc "C"_2`.</p>
                <p>Quand n tend vers l'infini, `cc "P"_(p1)` et `cc "P"_(p2)` tendent respectivement  vers `cc "P"_1` et `cc "P"_2`:</p>
                <p>`cc "P"_1 = lim_(n->oo) cc "P"_(p1)` et &nbsp&nbsp&nbsp&nbsp `cc "P"_2 = lim_(n->oo) cc "P"_(p2)`</p>
                <img src="preuve constance pi.png" height="400" id="constancePi">
                <p>d'après le théorème de Thalès :</p>
                <p style="margin-left: 35;">`(r_1)/(r_2) = (l_1)/(l_2)`</p>
                <p>`<=> (r_1 xx r_2)/(r_2) = (l_1 xx r_2)/(l_2)`</p>
                <p>`<=> (r_1)/(l_1) = (l_1 xx r_2)/(l_1 xx l_2)`</p>
                <p>`<=> (r_1)/(l_1) = (r_2)/(l_2)`</p>
                <p>`<=> (r_1)/(n xx l_1) = (r_2)/(n xx l_2)`</p>
                <p>`<=> (r_1)/(cc "P"_(p1)) = (r_2)/(cc "P"_(p2))`</p>
                <p>`<=> lim_(n->oo) ((r_1)/(cc "P"_(p1))) = lim_(n->oo) ((r_2)/(cc "P"_(p2)))`</p>
                <p>`<=> (r_1)/(cc "P"_1) = (r_2)/(cc "P"_2) = 2pi`</p>
                <p>donc &#960 est le même pour tout les cercle en géométrie euclidienne</p>
            </div>
            <div id=quadrature_du_cercle class=background>
                <h3>La quadrature du cercle</h3>
                <p>La quadrature du cercle est un problème vieux de l'Antiquité dont l'objectif ets de construire, en un nombre d'opération fini avec uniquement une règle non-graduée et un compas, un carré ayant la même surface qu'un cercle, ce qui revient à construire `sqrt(pi)`&nbsp à la règle et au compas.</p>
                <p>Un autre problème est celui de la rectification du cercle, qui est de construire un segment dont la longueur est égal au périmètre d'un cercle, ce qui revient à construire &#960 à la règle et au compas.</p>
                <p>Puisqu'il est possible de multiplier des longueurs et d'extraire des racines carrés, les 2 problèmes sont équivalent. L'imposibilité de ces problèmes sera prouvé en 1882</p>

            </div>
            <div id=calculPi class=background>
                <p>Dans cette partie, je vais présenter des formule plus ou moins actulles pour le calcule de &#960 </p>
                <div id=sum14dec>
                    <p>`pi = (12sum_(n = 0)^oo((-1)^n(6n)!(13591409 + 545140134n))/((3n!)(n!)^(3)640320^(3n + 3/2)))^-1`</p>
                </div>

                <div id=sum25dec>
                    <p style="overflow: auto;">`pi = (12sum_(n = 0)^oo((-1)^n(6n)!(212175710912sqrt(61) + 1657145277365 + n(13773980892672sqrt(61) + 107578229802750)))/((3n)!(n!)^(3)(5280(236674 + 30303sqrt(61)))^(3n + 3/2)))^-1`</p>

                    <div id=test25dec>
                        <span>nombre d'iteration : </span><span id=iter25dec></span><button style="margin-left: 15;" type="button"></button>
                    </div>
                </div>

                <div id=sum50dec>
                    <p>`pi = (1/(sqrt(-(C)^3))sum_(n=0)^oo((6n)!(A + nB))/((3n)!(n!)^(3)(C)^(3n)))^(-1)` avec:</p>
                    <p class=longtxt>`A = 63365028312971999585426220 + 28337702140800842046825600sqrt(5)`&nbsp</p>
                    <p class=longtxt style="margin-bottom: 40;">`+ 384sqrt(5)sqrt(10891728551171178200467436212395209160385656017 + 4870929086578810225077338534541688721351255040sqrt(5))`</p>
                    <p class=longtxt>`B = 7849910453496627210289749000 + 3510586678260932028965606400sqrt5`&nbsp</p>
                    <p class=longtxt  style="margin-bottom: 40;">` + 2515968sqrt(3110)sqrt(6260208323789001636993322654444020882161 + 2799650273060444296577206890718825190235 sqrt5)`</p>
                    <p class=longtxt>`C=-214772995063512240-96049403338648032sqrt(5)`&nbsp</p>
                    <p class=longtxt style="margin-bottom: 40;">`-1296sqrt(5)sqrt(10985234579463550323713318473 + 4912746253692362754607395912sqrt(5))`</p>

                    <button type="button" onclick="iterate50dec(0);" id=buttonTest50dec>Tester</button>
                    <div id=test50dec>
                        <span>nombre d'iteration : </span><span id=iter50dec>15</span><button style="margin-left: 15;" type="button" onclick="plusIterate50dec();">plus d'iteration</button>
                        <p id=pi50dec style="float: left;">bug</p>
                        <p class=pi>3.1415926535897932384626</p>
                   </div>

                </div>
                <br>
                <video width="400" id=rickRoll loop>
                    <source src="Rick Astley - Never Gonna Give You Up (Official Music Video).mp4" type="video/mp4">
                </video>
                <button type="button" onclick="playRickRoll();">lancer le meme</button><button type="button" onclick="stopRickRoll();">arrèter ce meme</button>
                <!--A=63365028312971999585426220+28337702140800842046825600*sqrt5 + 384*sqrt5sqrt(10891728551171178200467436212395209160385656017 + 4870929086578810225077338534541688721351255040*sqrt5)
B=7849910453496627210289749000+3510586678260932028965606400sqrt5 + 2515968*31101/2(6260208323789001636993322654444020882161 + 2799650273060444296577206890718825190235*51/2)1/2
C=-214772995063512240-96049403338648032*51/2-1296*51/2 sqrt(10985234579463550323713318473 + 4912746253692362754607395912*51/2)-->
            </div>
            <div id=settings class=background>
                <div class=changetheme>
                    <h3>Quel mode de couleur souhaitez vous utiliser ?</h3>
                    <button id=dark class=theme onclick="darktheme()">Mode sombre</button><button id=light class=theme onclick="lighttheme()">Mode clair</button>
                </div>
            </div>
        </div>
        <div class="themepopup color">
            <button class=close onclick="close_popup()">x</button>
            <h3>Quel mode de couleur souhaitez vous utiliser ?</h3>
            <button id=dark class=theme onclick="darktheme()">Mode sombre</button><button id=light class=theme onclick="lighttheme()">Mode clair</button><br>
            <small>Ne vous inquiétez pas vous pourrez toujours changer cela dans les paramètre</small>
        </div>
        <script>
            const pi = '3.1415926535897932384626433832795028841971693993751058209749445923078164062862089986280348253421170679821480865132823066470938446095505822317253594081284811174502841027019385211055596446229489549303819644288109756659334461284756482337867831652712019091456485669234603486104543266482133936072602491412737245870066063155881748815209209628292540917153643678925903600113305305488204665213841469519415116094330572703657595919530921861173819326117931051185480744623799627495673518857527248912279381830119491298336733624406566430860213949463952247371907021798609437027705392171762931767523846748184676694051320005681271452635608277857713427577896091736371787214684409012249534301465495853710507922796892589235420199561121290219608640344181598136297747713099605187072113499999983729780499510597317328160963185950244594553469083026425223082533446850352619311881710100031378387528865875332083814206171776691473035982534904287554687311595628638823537875937519577818577805321712268066130019278766111959092164201989';

            BigNumber.set({ DECIMAL_PLACES: 1000 })

            const memoize = (fn) => {
                let cache = {};
                return (...args) => {
                    let n = args[0];  // just taking one argument here
                    if (n in cache) {
                        return cache[n];
                    }
                    else {
                        let result = fn(n);
                        cache[n] = result;
                        return result;
                    }
                }
            }
            //------------------------------------------------------------
            //25 decimals / iteration sum
            //------------------------------------------------------------
            const sqrt61 = BigNumber('61').sqrt()
            function calc25dec(n){
                const Snum = BigNumber('-1').pow(n).times(fact(BigNumber('6').times(n))).times(BigNumber('212175710912').times(sqrt61).plus(BigNumber('1657145277365')));
                const Sden = 1;
                return Snum.div(Sden);
            }

            //------------------------------------------------------------
            //50 decimals / iteration sum
            //------------------------------------------------------------
            const A = BigNumber(vA)
            const B = BigNumber(vB)
            const C = BigNumber(vC)
            const D = BigNumber(vD)

            function calc50dec(n){
                const Snum = fact(BigNumber('6').times(n)).times(A.plus(B.times(n)));
                const Sden = fact(BigNumber('3').times(n)).times(fact(n).pow(3)).times(C.pow(BigNumber('3').times(n)));
                return Snum.div(Sden);
            }

            var memoizedSum50dec = (function() {
                let cache = {};
                return function(n) {
                    if (cache[n]){
                        return cache[n];
                    }else{
                        let result = 0;
                        if (n <= 0){
                            result = A;
                        }else{
                            result = calc50dec(n).plus(memoizedSum50dec(n-1));
                        }
                        cache[n] = result;
                        return cache[n]
                    }
                }
            })();

            function show50dec(value, iter){
                document.getElementById("test50dec").style.display = "block";
                let dec = 0;
                let front = "";
                let back = value;

                for (let i = 0; i < value.length; i++){
                    dec = value[i];

                    if (dec == pi[i]){
                        front = front + dec;
                        back = back.slice(1);
                    }else{
                        temp = "<span style='font-weight: bold; text-decoration: underline;'>" + front + "</span><span style='background-color: rgba(255, 0, 0, 0.5);'>" + back + "</span>";
                        break
                    }
                }
                document.getElementById("pi50dec").innerHTML = temp;
                const pis = document.getElementsByClassName('pi');
                for (let i = 0; i < pis.length; i++){
                    pis[i].innerHTML = pi;
                }
                document.getElementById('iter50dec').innerHTML = iter;
            }

            function iterate50dec(n){
                const S = memoizedSum50dec(n)
                const pi50 = BigNumber(D.times(S)).pow('-1').toPrecision(1002);
                show50dec(pi50, n + 1)
            }

            function plusIterate50dec(){
                const iter = parseInt(document.getElementById('iter50dec').innerHTML);
                iterate50dec(iter);
            }
            
            //------------------------------------------------------------
            //show functions
            //------------------------------------------------------------
            function darktheme(){
                const dark = document.getElementById("dark").style;
                dark.boxShadow = "5px 5px 5px #232323";
                dark.borderColor = "white";
                const light = document.getElementById("light").style;
                light.boxShadow = "5px 5px 5px #232323";
                light.borderColor = "white";
                const content = document.getElementsByClassName("color");
                for (let i = 0; i < content.length; i++){
                    let modif = content[i].style
                    modif.backgroundColor = "#36393f";
                    modif.color = "white";
                    modif.boxShadow = "10px 10px 8px #232323";
                    modif.borderColor = "white";
                }
            }

            function lighttheme(){
                const dark = document.getElementById("dark").style;
                dark.boxShadow = "5px 5px 5px dimgray";
                dark.borderColor = "black";
                const light = document.getElementById("light").style;
                light.boxShadow = "5px 5px 5px dimgray";
                light.borderColor = "black";
                const content = document.getElementsByClassName("color");
                for (let i = 0; i < content.length; i++){
                    let modif = content[i].style
                    modif.backgroundColor = "#F5F5DC";
                    modif.color = "black";
                    modif.boxShadow = "10px 10px 8px dimgray";
                    modif.borderColor = "black";
                }
            }

            function close_popup(){
                document.getElementsByClassName("themepopup")[0].style.display = "none";
            }

            function make_active(ele){
                const list = document.getElementById("menu").children;
                for(let i = 0;i < list.length; i++){
                    list[i].children[0].classList.remove("active");
                }
                ele.classList.add("active")
            }
            
            function hide_content(){
                const contentChild = document.getElementsByClassName("content")[0].children;
                for (let i = 0;i < contentChild.length; i++){
                    contentChild[i].style.display = "none";    
                }
            }

            function show_content(id){
                hide_content()
                document.getElementById(id).style.display = "block"
            }

            function playRickRoll(){
                document.getElementById("rickRoll").play();
            }

            function stopRickRoll(){
                document.getElementById("rickRoll").pause()
            }

            function theoremeThales(){
                document.getElementById("explicationtheoremethales").style.display = "inline-block";
            }

            function runtime(func, arg){
                var startTime = performance.now();
                func(arg);
                var endTime = performance.now();
                time = (endTime - startTime).toString();
                console.log("it took " + time + " ms");
                return time;
            }

            const fact = (function(){
                var f = [BigNumber("1"), BigNumber("1")];
                var i = 2;
                return function(n)
                {
                    if (typeof f[n] != 'undefined')
                        return f[n];
                    var result = f[i-1];
                    for (; i <= n; i++)
                        f[i] = result = result.times(i.toString());
                    return result;
                }
            })()
            var cache = 1000;
            // Due to memoization, following line will cache first 1000 elements.
            runtime(fact, cache);

            runtime(fact, cache);

            darktheme();
            close_popup();
        </script>
    </body>
</html>